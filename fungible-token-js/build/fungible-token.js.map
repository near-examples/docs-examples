{"version":3,"file":"fungible-token.js","sources":["../node_modules/near-sdk-js/lib/near-bindgen.js","../node_modules/near-sdk-js/lib/api.js","../node_modules/near-sdk-js/lib/near-contract.js","../node_modules/near-sdk-js/lib/collections/lookup-map.js","../src/index.js"],"sourcesContent":["export function call(target, key, descriptor) {\n}\nexport function view(target, key, descriptor) {\n}\nexport function NearBindgen(target) {\n    return class extends target {\n        static _init() {\n            // @ts-ignore\n            let args = target.deserializeArgs();\n            let ret = new target(args);\n            // @ts-ignore\n            ret.serialize();\n            return ret;\n        }\n        static _get() {\n            let ret = Object.create(target.prototype);\n            return ret;\n        }\n    };\n}\n","const U64_MAX = 2n ** 64n - 1n;\nconst EVICTED_REGISTER = U64_MAX - 1n;\nexport function log(...params) {\n    env.log(`${params\n        .map(x => x === undefined ? 'undefined' : x) // Stringify undefined\n        .map(x => typeof (x) === 'object' ? JSON.stringify(x) : x) // Convert Objects to strings\n        .join(' ')}` // Convert to string\n    );\n}\nexport function signerAccountId() {\n    env.signer_account_id(0);\n    return env.read_register(0);\n}\nexport function signerAccountPk() {\n    env.signer_account_pk(0);\n    return env.read_register(0);\n}\nexport function predecessorAccountId() {\n    env.predecessor_account_id(0);\n    return env.read_register(0);\n}\nexport function blockIndex() {\n    return env.block_index();\n}\nexport function blockHeight() {\n    return blockIndex();\n}\nexport function blockTimestamp() {\n    return env.block_timestamp();\n}\nexport function epochHeight() {\n    return env.epoch_height();\n}\nexport function attachedDeposit() {\n    return env.attached_deposit();\n}\nexport function prepaidGas() {\n    return env.prepaid_gas();\n}\nexport function usedGas() {\n    return env.used_gas();\n}\nexport function randomSeed() {\n    env.random_seed(0);\n    return env.read_register(0);\n}\nexport function sha256(value) {\n    env.sha256(value, 0);\n    return env.read_register(0);\n}\nexport function keccak256(value) {\n    env.keccak256(value, 0);\n    return env.read_register(0);\n}\nexport function keccak512(value) {\n    env.keccak512(value, 0);\n    return env.read_register(0);\n}\nexport function ripemd160(value) {\n    env.ripemd160(value, 0);\n    return env.read_register(0);\n}\nexport function ecrecover(hash, sig, v, malleabilityFlag) {\n    let ret = env.ecrecover(hash, sig, v, malleabilityFlag, 0);\n    if (ret === 0n) {\n        return null;\n    }\n    return env.read_register(0);\n}\nexport function panic(msg) {\n    if (msg !== undefined) {\n        env.panic(msg);\n    }\n    else {\n        env.panic();\n    }\n}\nexport function panicUtf8(msg) {\n    env.panic_utf8(msg);\n}\nexport function logUtf8(msg) {\n    env.log_utf8(msg);\n}\nexport function logUtf16(msg) {\n    env.log_utf16(msg);\n}\nexport function storageRead(key) {\n    let ret = env.storage_read(key, 0);\n    if (ret === 1n) {\n        return env.read_register(0);\n    }\n    else {\n        return null;\n    }\n}\nexport function storageHasKey(key) {\n    let ret = env.storage_has_key(key);\n    if (ret === 1n) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function validatorStake(accountId) {\n    return env.validator_stake(accountId);\n}\nexport function validatorTotalStake() {\n    return env.validator_total_stake();\n}\nexport function altBn128G1Multiexp(value) {\n    env.alt_bn128_g1_multiexp(value, 0);\n    return env.read_register(0);\n}\nexport function altBn128G1Sum(value) {\n    env.alt_bn128_g1_sum(value, 0);\n    return env.read_register(0);\n}\nexport function altBn128PairingCheck(value) {\n    let ret = env.alt_bn128_pairing_check(value);\n    if (ret === 1n) {\n        return true;\n    }\n    else {\n        return false;\n    }\n}\nexport function jsvmAccountId() {\n    env.jsvm_account_id(0);\n    return env.read_register(0);\n}\nexport function jsvmJsContractName() {\n    env.jsvm_js_contract_name(0);\n    return env.read_register(0);\n}\nexport function jsvmMethodName() {\n    env.jsvm_method_name(0);\n    return env.read_register(0);\n}\nexport function jsvmArgs() {\n    env.jsvm_args(0);\n    return env.read_register(0);\n}\nexport function jsvmStorageWrite(key, value) {\n    let exist = env.jsvm_storage_write(key, value, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmStorageRead(key) {\n    let exist = env.jsvm_storage_read(key, 0);\n    if (exist === 1n) {\n        return env.read_register(0);\n    }\n    return null;\n}\nexport function jsvmStorageRemove(key) {\n    let exist = env.jsvm_storage_remove(key, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmStorageHasKey(key) {\n    let exist = env.jsvm_storage_has_key(key);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function jsvmCallRaw(contractName, method, args) {\n    env.jsvm_call(contractName, method, JSON.stringify(args), 0);\n    return env.read_register(0);\n}\nexport function jsvmCall(contractName, method, args) {\n    let ret = jsvmCallRaw(contractName, method, args);\n    if (ret === null) {\n        return ret;\n    }\n    return JSON.parse(ret);\n}\nexport function storageGetEvicted() {\n    return env.read_register(EVICTED_REGISTER);\n}\nexport function jsvmValueReturn(value) {\n    env.jsvm_value_return(value);\n}\n// Standalone only APIs\nexport function currentAccountId() {\n    env.current_account_id(0);\n    return env.read_register(0);\n}\nexport function input() {\n    env.input(0);\n    return env.read_register(0);\n}\nexport function storageUsage() {\n    env.storageUsage(0);\n    return env.storage_usage(0);\n}\nexport function accountBalance() {\n    return env.account_balance();\n}\nexport function accountLockedBalance() {\n    return env.account_locked_balance();\n}\nexport function valueReturn(value) {\n    env.value_return(value);\n}\nexport function promiseCreate(accountId, methodName, args, amount, gas) {\n    return env.promise_create(accountId, methodName, args, amount, gas);\n}\nexport function promiseThen(promiseIndex, accountId, methodName, args, amount, gas) {\n    return env.promise_then(promiseIndex, accountId, methodName, args, amount, gas);\n}\nexport function promiseAnd(...promiseIndex) {\n    return env.promise_and(...promiseIndex);\n}\nexport function promiseBatchCreate(accountId) {\n    return env.promise_batch_create(accountId);\n}\nexport function promiseBatchThen(promiseIndex, accountId) {\n    return env.promise_batch_then(promiseIndex, accountId);\n}\nexport function promiseBatchActionCreateAccount(promiseIndex) {\n    env.promise_batch_action_create_account(promiseIndex);\n}\nexport function promiseBatchActionDeployContract(promiseIndex, code) {\n    env.promise_batch_action_deploy_contract(promiseIndex, code);\n}\nexport function promiseBatchActionFunctionCall(promiseIndex, methodName, args, amount, gas) {\n    env.promise_batch_action_function_call(promiseIndex, methodName, args, amount, gas);\n}\nexport function promiseBatchActionTransfer(promiseIndex, amount) {\n    env.promise_batch_action_transfer(promiseIndex, amount);\n}\nexport function promiseBatchActionStake(promiseIndex, amount, publicKey) {\n    env.promise_batch_action_stake(promiseIndex, amount, publicKey);\n}\nexport function promiseBatchActionAddKeyWithFullAccess(promiseIndex, publicKey, nonce) {\n    env.promise_batch_action_add_key_with_full_access(promiseIndex, publicKey, nonce);\n}\nexport function promiseBatchActionAddKeyWithFunctionCall(promiseIndex, publicKey, nonce, allowance, receiverId, methodNames) {\n    env.promise_batch_action_add_key_with_function_call(promiseIndex, publicKey, nonce, allowance, receiverId, methodNames);\n}\nexport function promiseBatchActionDeleteKey(promiseIndex, publicKey) {\n    env.promise_batch_action_delete_key(promiseIndex, publicKey);\n}\nexport function promiseBatchActionDeleteAccount(promiseIndex, beneficiaryId) {\n    env.promise_batch_action_delete_account(promiseIndex, beneficiaryId);\n}\nexport function promiseResultsCount() {\n    return env.promise_results_count();\n}\nexport var PromiseResult;\n(function (PromiseResult) {\n    PromiseResult[PromiseResult[\"NotReady\"] = 0] = \"NotReady\";\n    PromiseResult[PromiseResult[\"Successful\"] = 1] = \"Successful\";\n    PromiseResult[PromiseResult[\"Failed\"] = 2] = \"Failed\";\n})(PromiseResult || (PromiseResult = {}));\nexport function promiseResult(resultIdx) {\n    let status = env.promise_result(resultIdx, 0);\n    if (status == PromiseResult.Successful) {\n        return env.read_register(0);\n    }\n    else if (status == PromiseResult.Failed ||\n        status == PromiseResult.NotReady) {\n        return status;\n    }\n    else {\n        panic(`Unexpected return code: ${status}`);\n    }\n}\nexport function promiseReturn(promiseIdx) {\n    env.promise_return(promiseIdx);\n}\nexport function storageWrite(key, value) {\n    let exist = env.storage_write(key, value, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\nexport function storageRemove(key) {\n    let exist = env.storage_remove(key, EVICTED_REGISTER);\n    if (exist === 1n) {\n        return true;\n    }\n    return false;\n}\n","import * as near from \"./api\";\nexport class NearContract {\n    deserialize() {\n        let state = near.storageRead(\"STATE\");\n        if (state) {\n            Object.assign(this, JSON.parse(state));\n        }\n        else {\n            throw new Error(\"Contract state is empty\");\n        }\n    }\n    serialize() {\n        near.storageWrite(\"STATE\", JSON.stringify(this));\n    }\n    static deserializeArgs() {\n        let args = near.input();\n        return JSON.parse(args || \"{}\");\n    }\n    static serializeReturn(ret) {\n        return JSON.stringify(ret);\n    }\n}\n","import * as near from '../api';\nexport class LookupMap {\n    constructor(keyPrefix) {\n        this.keyPrefix = keyPrefix;\n    }\n    containsKey(key) {\n        let storageKey = this.keyPrefix + key;\n        return near.storageHasKey(storageKey);\n    }\n    get(key) {\n        let storageKey = this.keyPrefix + key;\n        return near.storageRead(storageKey);\n    }\n    remove(key) {\n        let storageKey = this.keyPrefix + key;\n        if (near.storageRemove(storageKey)) {\n            return near.storageGetEvicted();\n        }\n        return null;\n    }\n    set(key, value) {\n        let storageKey = this.keyPrefix + key;\n        if (near.storageWrite(storageKey, value)) {\n            return near.storageGetEvicted();\n        }\n        return null;\n    }\n    extend(kvs) {\n        for (let kv of kvs) {\n            this.set(kv[0], kv[1]);\n        }\n    }\n}\n","import { NearContract, NearBindgen, call, view, near, LookupMap } from \"near-sdk-js\";\n\nfunction assert(b, str) {\n    if (!b) {\n        near.panic(\"assertion failed: \" + str);\n    }\n}\n\n@NearBindgen\nclass FungibleToken extends NearContract {\n    constructor({ prefix, totalSupply }) {\n        super();\n        this.accounts = new LookupMap(prefix);\n        this.totalSupply = totalSupply;\n        this.accounts.set(near.signerAccountId(), totalSupply);\n        // don't need accountStorageUsage like rust in JS contract, storage deposit management is automatic in JSVM\n    }\n\n    deserialize() {\n        super.deserialize();\n        this.accounts = Object.assign(new LookupMap(), this.accounts);\n    }\n\n    internalDeposit({ accountId, amount }) {\n        let balance = this.accounts.get(accountId) || \"0\";\n        let newBalance = BigInt(balance) + BigInt(amount);\n        this.accounts.set(accountId, newBalance.toString());\n        this.totalSupply = (BigInt(this.totalSupply) + BigInt(amount)).toString();\n    }\n\n    internalWithdraw({ accountId, amount }) {\n        let balance = this.accounts.get(accountId) || \"0\";\n        let newBalance = BigInt(balance) - BigInt(amount);\n        assert(newBalance >= 0n, \"The account doesn't have enough balance\");\n        this.accounts.set(accountId, newBalance.toString());\n        let newSupply = BigInt(this.totalSupply) - BigInt(amount);\n        assert(newSupply >= 0n, \"Total supply overflow\");\n        this.totalSupply = newSupply.toString();\n    }\n\n    internalTransfer({ senderId, receiverId, amount, memo }) {\n        assert(senderId != receiverId, \"Sender and receiver should be different\");\n        let amountInt = BigInt(amount);\n        assert(amountInt > 0n, \"The amount should be a positive number\");\n        this.internalWithdraw({ accountId: senderId, amount });\n        this.internalDeposit({ accountId: receiverId, amount });\n    }\n\n    @call\n    ftTransfer({ receiverId, amount, memo }) {\n        let senderId = near.predecessorAccountId();\n        this.internalTransfer({ senderId, receiverId, amount, memo });\n    }\n\n    @call\n    ftTransferCall({ receiverId, amount, memo, msg }) {\n        let senderId = near.predecessorAccountId();\n        this.internalTransfer({ senderId, receiverId, amount, memo });\n        const promise = near.promiseBatchCreate(receiverId);\n        const params = { senderId: senderId, amount: amount, msg: msg, receiverId: receiverId };\n        near.promiseBatchActionFunctionCall(promise, 'ftOnTransfer', JSON.stringify(params), 0, 30000000000000);        \n        return near.promiseReturn();\n    }\n\n    @view\n    ftTotalSupply() {\n        return this.totalSupply;\n    }\n\n    @view\n    ftBalanceOf({ accountId }) {\n        return this.accounts.get(accountId) || \"0\";\n    }\n}\n"],"names":["call","target","key","descriptor","view","NearBindgen","_init","args","deserializeArgs","ret","serialize","_get","Object","create","prototype","U64_MAX","EVICTED_REGISTER","signerAccountId","env","signer_account_id","read_register","predecessorAccountId","predecessor_account_id","panic","msg","undefined","storageRead","storage_read","storageHasKey","storage_has_key","storageGetEvicted","input","promiseBatchCreate","accountId","promise_batch_create","promiseBatchActionFunctionCall","promiseIndex","methodName","amount","gas","promise_batch_action_function_call","PromiseResult","promiseReturn","promiseIdx","promise_return","storageWrite","value","exist","storage_write","storageRemove","storage_remove","NearContract","deserialize","state","near","assign","JSON","parse","Error","stringify","serializeReturn","LookupMap","constructor","keyPrefix","containsKey","storageKey","get","remove","set","extend","kvs","kv","assert","b","str","FungibleToken","prefix","totalSupply","accounts","internalDeposit","balance","newBalance","BigInt","toString","internalWithdraw","newSupply","internalTransfer","senderId","receiverId","memo","amountInt","ftTransfer","ftTransferCall","promise","params","ftTotalSupply","ftBalanceOf"],"mappings":"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"}